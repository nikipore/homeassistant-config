thermal_comfort:
  - sensor:
      - name: Abstellkammer
        temperature_sensor: sensor.bewegungssensor_abstellkammer_temperature
        humidity_sensor: sensor.bewegungssensor_abstellkammer_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 14f410e2756a4801f5a1f3b4a49744b731ca034f
      - name: Abstellkammer Terrasse
        temperature_sensor: sensor.bewegungssensor_abstellkammer_terrasse_temperature
        humidity_sensor: sensor.bewegungssensor_abstellkammer_terrasse_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 4dc8472ee8b5b671c0a6efbc0be0d3a31e16d1b7
      - name: Ankleide
        temperature_sensor: sensor.thermostat_ankleide_temperature
        humidity_sensor: sensor.thermostat_ankleide_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 10ac483887930221eca7c645cab6ff22da05e0cd
      - name: Arbeitszimmer
        temperature_sensor: sensor.thermostat_arbeitszimmer_temperature
        humidity_sensor: sensor.thermostat_arbeitszimmer_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: b7ad00a3c417479e3169322b734eda3533bb1262
      - name: Badezimmer
        temperature_sensor: sensor.thermostat_badezimmer_temperature
        humidity_sensor: sensor.thermostat_badezimmer_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 1a7b9e1ea1f8cb898ae9d8be98e58c990c6e5afd
      - name: Duschbad
        temperature_sensor: sensor.thermostat_duschbad_temperature
        humidity_sensor: sensor.thermostat_duschbad_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 184b4f52f62fb6cc290a4b638f24e0b7b903958e
      - name: Flur
        temperature_sensor: sensor.thermostat_flur_temperature
        humidity_sensor: sensor.thermostat_flur_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: cc15a0aeed5932ef17f85d7f34984241ee44a347
      - name: Keller
        temperature_sensor: sensor.temperature_sensor_keller_temperature
        humidity_sensor: sensor.temperature_sensor_keller_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: d4309896f50c2ad70f60d59676bfe394d4f8e2fb
      - name: Küche
        temperature_sensor: sensor.thermostat_kueche_temperature
        humidity_sensor: sensor.thermostat_kueche_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: e779c72017c2e60a7fce7ac504b3ba78b05d2985
      - name: Nino
        temperature_sensor: sensor.thermostat_nino_temperature
        humidity_sensor: sensor.thermostat_nino_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 8d2394e557d11ef8c0c43b49733b97f26d0dba49
      - name: Noah
        temperature_sensor: sensor.thermostat_noah_temperature
        humidity_sensor: sensor.thermostat_noah_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: eff008376875a0c1b234f862676ac4ada0d81585
      - name: Schlafzimmer
        temperature_sensor: sensor.thermostat_schlafzimmer_temperature
        humidity_sensor: sensor.thermostat_schlafzimmer_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: e3dd36e6fc1e6a982e824b47d586b3e9da43d1a0
      - name: Waschraum
        temperature_sensor: sensor.temperature_sensor_waschraum_temperature
        humidity_sensor: sensor.temperature_sensor_waschraum_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 5ae4acb77b576ce7fade33cdc4044c42b48128a0
      - name: Wetter
        temperature_sensor: sensor.weather_forecast_temperature
        humidity_sensor: sensor.weather_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - heat_index
          - dew_point
          - dew_point_perception
          - frost_point
          - frost_risk
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: ce55f7fe5a7f466810bfda65f79620a514815c75
      - name: Wohnzimmer
        temperature_sensor: sensor.thermostat_wohnzimmer_temperature
        humidity_sensor: sensor.thermostat_wohnzimmer_humidity
        custom_icons: true
        sensor_types:
          - absolute_humidity
          - dew_point
          - dew_point_perception
          - summer_simmer_index
          - summer_simmer_perception
        unique_id: 99e6445199eee6a0c23c1061fb5fddc254ea8b02

template:
  - binary_sensor:
      - name: abstellkammer_terrasse_ventilate
        state: >
          {{ is_state('binary_sensor.abstellkammer_terrasse_ventilate_humidity', 'on') and is_state('binary_sensor.abstellkammer_terrasse_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.abstellkammer_terrasse_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: ankleide_ventilate
        state: >
          {{ is_state('binary_sensor.ankleide_ventilate_humidity', 'on') and is_state('binary_sensor.ankleide_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.ankleide_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: arbeitszimmer_ventilate
        state: >
          {{ is_state('binary_sensor.arbeitszimmer_ventilate_humidity', 'on') and is_state('binary_sensor.arbeitszimmer_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.arbeitszimmer_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: badezimmer_ventilate
        state: >
          {{ is_state('binary_sensor.badezimmer_ventilate_humidity', 'on') and is_state('binary_sensor.badezimmer_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.badezimmer_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: duschbad_ventilate
        state: >
          {{ is_state('binary_sensor.duschbad_ventilate_humidity', 'on') and is_state('binary_sensor.duschbad_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.duschbad_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: flur_ventilate
        state: >
          {{ is_state('binary_sensor.flur_ventilate_humidity', 'on') and is_state('binary_sensor.flur_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.flur_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: keller_ventilate
        state: >
          {{ is_state('binary_sensor.keller_ventilate_humidity', 'on') and is_state('binary_sensor.keller_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.keller_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: kueche_ventilate
        state: >
          {{ is_state('binary_sensor.kueche_ventilate_humidity', 'on') and is_state('binary_sensor.kueche_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.kueche_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: nino_ventilate
        state: >
          {{ is_state('binary_sensor.nino_ventilate_humidity', 'on') and is_state('binary_sensor.nino_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.nino_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: noah_ventilate
        state: >
          {{ is_state('binary_sensor.noah_ventilate_humidity', 'on') and is_state('binary_sensor.noah_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.noah_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: schlafzimmer_ventilate
        state: >
          {{ is_state('binary_sensor.schlafzimmer_ventilate_humidity', 'on') and is_state('binary_sensor.schlafzimmer_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.schlafzimmer_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: waschraum_ventilate
        state: >
          {{ is_state('binary_sensor.waschraum_ventilate_humidity', 'on') and is_state('binary_sensor.keller_waschraum_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.waschraum_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: wohnzimmer_ventilate
        state: >
          {{ is_state('binary_sensor.wohnzimmer_ventilate_humidity', 'on') and is_state('binary_sensor.wohnzimmer_ventilate_temperature', 'on') }}
        icon: >
          {{ is_state("binary_sensor.wohnzimmer_ventilate", "on") | iif("mdi:fan", "mdi:fan-off") }}

      - name: abstellkammer_terrasse_ventilate_humidity
        state: >
          {{ states('sensor.abstellkammer_terrasse_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.abstellkammer_terrasse_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: ankleide_ventilate_humidity
        state: >
          {{ states('sensor.ankleide_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.ankleide_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: arbeitszimmer_ventilate_humidity
        state: >
          {{ states('sensor.arbeitszimmer_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.arbeitszimmer_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: badezimmer_ventilate_humidity
        state: >
          {{ states('sensor.badezimmer_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.badezimmer_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: duschbad_ventilate_humidity
        state: >
          {{ states('sensor.duschbad_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.duschbad_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: flur_ventilate_humidity
        state: >
          {{ states('sensor.flur_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.flur_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: keller_ventilate_humidity
        state: >
          {{ states('sensor.keller_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.keller_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: kueche_ventilate_humidity
        state: >
          {{ states('sensor.kuche_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.kueche_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: nino_ventilate_humidity
        state: >
          {{ states('sensor.nino_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.nino_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: noah_ventilate_humidity
        state: >
          {{ states('sensor.noah_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.noah_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: schlafzimmer_ventilate_humidity
        state: >
          {{ states('sensor.schlafzimmer_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.schlafzimmer_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: waschraum_ventilate_humidity
        state: >
          {{ states('sensor.waschraum_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.waschraum_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: wohnzimmer_ventilate_humidity
        state: >
          {{ states('sensor.wohnzimmer_absolute_humidity') | float(0) > states('sensor.wetter_absolute_humidity') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.wohnzimmer_ventilate_humidity", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: abstellkammer_terrasse_ventilate_temperature
        state: >
          {{ states('sensor.bewegungssensor_abstellkammer_terrasse_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.abstellkammer_terrasse_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: ankleide_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_ankleide_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.ankleide_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: arbeitszimmer_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_arbeitszimmer_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.arbeitszimmer_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: badezimmer_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_badezimmer_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.badezimmer_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: duschbad_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_duschbad_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.duschbad_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: flur_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_flur_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.flur_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: keller_ventilate_temperature
        state: >
          {{ states('sensor.temperature_sensor_keller_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.keller_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: kueche_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_kueche_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.kueche_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: nino_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_noah_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.nino_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: noah_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_noah_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.noah_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: schlafzimmer_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_schlafzimmer_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.schlafzimmer_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: waschraum_ventilate_temperature
        state: >
          {{ states('sensor.temperature_sensor_waschraum_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.waschraum_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}
      - name: wohnzimmer_ventilate_temperature
        state: >
          {{ states('sensor.thermostat_wohnzimmer_temperature') | float(0) > states('sensor.weather_forecast_temperature') | float(0) }}
        icon: >
          {{ is_state("binary_sensor.wohnzimmer_ventilate_temperature", "on") | iif("mdi:fan", "mdi:fan-off") }}

  - sensor:
      - name: ankleide_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_ankleide_humidity'), states('sensor.ankleide_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: abstellkammer_terrasse_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.bewegungssensor_abstellkammer_terrasse_humidity'), states('sensor.abstellkammer_terrasse_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: arbeitszimmer_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_arbeitszimmer_humidity'), states('sensor.arbeitszimmer_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: badezimmer_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_badezimmer_humidity'), states('sensor.badezimmer_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: duschbad_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_duschbad_humidity'), states('sensor.duschbad_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: flur_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_flur_humidity'), states('sensor.flur_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: keller_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.temperature_sensor_keller_humidity'), states('sensor.keller_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: kueche_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_kueche_humidity'), states('sensor.kuche_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: nino_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_nino_humidity'), states('sensor.nino_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: noah_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_noah_humidity'), states('sensor.noah_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: schlafzimmer_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_schlafzimmer_humidity'), states('sensor.schlafzimmer_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: waschraum_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.temperature_sensor_waschraum_humidity'), states('sensor.waschraum_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement
      - name: wohnzimmer_ventilate_relative_humidity_simulated
        state: >
          {% macro relative_humidity_simulated(relative_humidity_1, absolute_humidity_1, absolute_humidity_2) %}
            {% if relative_humidity_1 in ('unknown', 'unavailable') %}
              {{ relative_humidity_1 }}
            {% elif absolute_humidity_1 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_1 }}
            {% elif absolute_humidity_2 in ('unknown', 'unavailable') %}
              {{ absolute_humidity_2 }}
            {% elif absolute_humidity_1 == 0 %}
              unknown
            {% else %}
              {{ (relative_humidity_1 | float(0) / absolute_humidity_1 | float(0) * absolute_humidity_2 | float(0) ) | round(1) }}
            {% endif %}
          {% endmacro %}
          {{ relative_humidity_simulated(states('sensor.thermostat_wohnzimmer_humidity'), states('sensor.wohnzimmer_absolute_humidity'), states('sensor.wetter_absolute_humidity')) }}
        device_class: humidity
        unit_of_measurement: "%"
        state_class: measurement

homeassistant:
  customize:
    binary_sensor.abstellkammer_terrasse_ventilate:
      friendly_name: "Abstellkammer Terrasse"
    binary_sensor.abstellkammer_terrasse_ventilate_humidity:
      friendly_name: "Abstellkammer Terrasse"
    binary_sensor.abstellkammer_terrasse_ventilate_temperature:
      friendly_name: "Abstellkammer Terrasse"
    binary_sensor.ankleide_ventilate:
      friendly_name: "Ankleide"
    binary_sensor.ankleide_ventilate_humidity:
      friendly_name: "Ankleide"
    binary_sensor.ankleide_ventilate_temperature:
      friendly_name: "Ankleide"
    binary_sensor.arbeitszimmer_ventilate:
      friendly_name: "Arbeitszimmer"
    binary_sensor.arbeitszimmer_ventilate_humidity:
      friendly_name: "Arbeitszimmer"
    binary_sensor.arbeitszimmer_ventilate_temperature:
      friendly_name: "Arbeitszimmer"
    binary_sensor.badezimmer_ventilate:
      friendly_name: "Badezimmer"
    binary_sensor.badezimmer_ventilate_humidity:
      friendly_name: "Badezimmer"
    binary_sensor.badezimmer_ventilate_temperature:
      friendly_name: "Badezimmer"
    binary_sensor.duschbad_ventilate:
      friendly_name: "Duschbad"
    binary_sensor.duschbad_ventilate_humidity:
      friendly_name: "Duschbad"
    binary_sensor.duschbad_ventilate_temperature:
      friendly_name: "Duschbad"
    binary_sensor.flur_ventilate:
      friendly_name: "Flur"
    binary_sensor.flur_ventilate_humidity:
      friendly_name: "Flur"
    binary_sensor.flur_ventilate_temperature:
      friendly_name: "Flur"
    binary_sensor.keller_ventilate:
      friendly_name: "Keller"
    binary_sensor.keller_ventilate_humidity:
      friendly_name: "Keller"
    binary_sensor.keller_ventilate_temperature:
      friendly_name: "Keller"
    binary_sensor.kueche_ventilate:
      friendly_name: "Küche"
    binary_sensor.kueche_ventilate_humidity:
      friendly_name: "Küche"
    binary_sensor.kueche_ventilate_temperature:
      friendly_name: "Küche"
    binary_sensor.nino_ventilate:
      friendly_name: "Nino"
    binary_sensor.nino_ventilate_humidity:
      friendly_name: "Nino"
    binary_sensor.nino_ventilate_temperature:
      friendly_name: "Nino"
    binary_sensor.noah_ventilate:
      friendly_name: "Noah"
    binary_sensor.noah_ventilate_humidity:
      friendly_name: "Noah"
    binary_sensor.noah_ventilate_temperature:
      friendly_name: "Noah"
    binary_sensor.schlafzimmer_ventilate:
      friendly_name: "Schlafzimmer"
    binary_sensor.schlafzimmer_ventilate_humidity:
      friendly_name: "Schlafzimmer"
    binary_sensor.schlafzimmer_ventilate_temperature:
      friendly_name: "Schlafzimmer"
    binary_sensor.waschraum_ventilate:
      friendly_name: "Waschraum"
    binary_sensor.waschraum_ventilate_humidity:
      friendly_name: "Waschraum"
    binary_sensor.waschraum_ventilate_temperature:
      friendly_name: "Waschraum"
    binary_sensor.wohnzimmer_ventilate:
      friendly_name: "Wohnzimmer"
    binary_sensor.wohnzimmer_ventilate_humidity:
      friendly_name: "Wohnzimmer"
    binary_sensor.wohnzimmer_ventilate_temperature:
      friendly_name: "Wohnzimmer"

    sensor.thermostat_ankleide_humidity:
      friendly_name: "Ankleide"
    sensor.thermostat_ankleide_temperature:
      friendly_name: "Ankleide"
    sensor.bewegungssensor_abstellkammer_temperature:
      friendly_name: "Abstellkammer"
    sensor.bewegungssensor_abstellkammer_humidity:
      friendly_name: "Abstellkammer"
    sensor.bewegungssensor_abstellkammer_terrasse_temperature:
      friendly_name: "Abstellkammer Terrasse"
    sensor.bewegungssensor_abstellkammer_terrasse_humidity:
      friendly_name: "Abstellkammer Terrasse"
    sensor.thermostat_arbeitszimmer_humidity:
      friendly_name: "Arbeitszimmer"
    sensor.thermostat_arbeitszimmer_temperature:
      friendly_name: "Arbeitszimmer"
    sensor.thermostat_badezimmer_humidity:
      friendly_name: "Badezimmer"
    sensor.thermostat_badezimmer_temperature:
      friendly_name: "Badezimmer"
    sensor.thermostat_duschbad_humidity:
      friendly_name: "Duschbad"
    sensor.thermostat_duschbad_temperature:
      friendly_name: "Duschbad"
    sensor.thermostat_flur_humidity:
      friendly_name: "Flur"
    sensor.thermostat_flur_temperature:
      friendly_name: "Flur"
    sensor.temperature_sensor_keller_humidity:
      friendly_name: "Keller"
    sensor.temperature_sensor_keller_temperature:
      friendly_name: "Keller"
    sensor.thermostat_kueche_humidity:
      friendly_name: "Küche"
    sensor.thermostat_kueche_temperature:
      friendly_name: "Küche"
    sensor.thermostat_nino_humidity:
      friendly_name: "Nino"
    sensor.thermostat_nino_temperature:
      friendly_name: "Nino"
    sensor.thermostat_noah_humidity:
      friendly_name: "Noah"
    sensor.thermostat_noah_temperature:
      friendly_name: "Noah"
    sensor.thermostat_schlafzimmer_humidity:
      friendly_name: "Schlafzimmer"
    sensor.thermostat_schlafzimmer_temperature:
      friendly_name: "Schlafzimmer"
    sensor.temperature_sensor_waschraum_humidity:
      friendly_name: "Waschraum"
    sensor.temperature_sensor_waschraum_temperature:
      friendly_name: "Waschraum"
    sensor.thermostat_wohnzimmer_humidity:
      friendly_name: "Wohnzimmer"
    sensor.thermostat_wohnzimmer_temperature:
      friendly_name: "Wohnzimmer"

    sensor.abstellkammer_terrasse_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Abstellkammer Terrasse)"
    sensor.ankleide_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Ankleide)"
    sensor.arbeitszimmer_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Arbeitszimmer)"
    sensor.badezimmer_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Badezimmer)"
    sensor.duschbad_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Duschbad)"
    sensor.flur_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Flur)"
    sensor.keller_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Keller)"
    sensor.kueche_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Küche)"
    sensor.nino_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Nino)"
    sensor.noah_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Noah)"
    sensor.schlafzimmer_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Schlafzimmer)"
    sensor.waschraum_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Waschraum)"
    sensor.wohnzimmer_ventilate_relative_humidity_simulated:
      friendly_name: "rel. Luftfeuchtigkeit nach Lüftung (Wohnzimmer)"
